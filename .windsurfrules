# Windsurf Ultra Slim Global Rule (Strict Mode)

## 1. Zero Hallucination

Never guess APIs, props, or behaviors.  
Always verify using official documentation (React, MUI, Zustand, Tailwind, etc.).  
If not verifiable → **"Blocked: Source not verified."**

---

## 2. Naming Rules (Concise but Detailed)

### 2.1 Base Conventions

- **Components**: PascalCase
  - e.g. `DirectoriesCard`, `QueryAutoComplete`
- **Hooks**: useXxxx（camelCase + use）
  - `useAsync`, `useDirectoriesStore`
- **Utils / pure functions**: camelCase
  - `buildSearchRequestParams`, `formatDate`
- **Boolean helpers**: MUST start with
  - `is` / `has` / `can` / `should` / `need` / `allow`
- **Constants**: UPPER_SNAKE_CASE
  - `TITLE_MAP`, `API_BASE_URL`
- **Component files**: PascalCase
  - `DirectoriesCard.tsx`, `QueryAutoComplete.tsx`
- **Non-component files (utils/hooks/types)**: camelCase
  - `useAsync.ts`, `additional.ts`
- **Exported functions**: arrow function style only
  - `export const buildXxx = (...) => { ... }`
- **Types / interfaces**: PascalCase
  - `DirectoriesQueryItem`, `ApiResponse`
- **Enums**: Enum + members use lower_snake_case
  - `DirectoriesBizIdEnum.capital_markets`

If naming is unclear → **ask for naming verification**.

---

### 2.2 Event Handlers

- **Action handlers** → `onXxxToYyy`
  - `onClickToUpload`, `onSubmitToSave`
- **Value change** → `onXxxChange`
  - `onFormChange`, `onValueChange`
- **Selection** → `onXxxSelect`
  - `onItemSelect`, `onOptionSelect`
- **Toggle** → `onXxxToggle`
  - `onMenuToggle`, `onExpandToggle`

---

### 2.3 Boolean Naming

- `isXxx`: state/condition
- `hasXxx`: existence
- `canXxx`: capability
- `shouldXxx`: business decision
- `needXxx`: requirement
- `allowXxx`: permission

Any boolean lacking these prefixes is **not allowed**.

---

### 2.4 Function Verbs by Responsibility

Use consistent leading verbs:

- **buildXxx** → assemble data
- **processXxx / transformXxx** → modify data
- **parseXxx** → interpret / decode
- **formatXxx** → output formatting
- **getXxx / fetchXxx** → retrieve
- **updateXxx** → mutate state/data
- **validateXxx** → check correctness
- **initXxx / xxxInit** → initial setup
- **collectXxx** → gather multiple values
- **mergeXxx** → combine structures

---

### 2.5 Module Prefix (Recommended)

Use module-specific prefixes to avoid naming conflicts.

- Bad: `isEmptyValue`, `mergeFields`
- Good:
  - `isEmptyDirectoriesFieldValue`
  - `mergeNonEmptyDirectoriesFields`

---

## 3. Code Answer Requirements

Every **code-related** answer MUST include:

1. Source Used (docs / MCP / version)
2. Verified Reason (what the source says)
3. Valid Code (consistent with the source)
4. Version Notes (e.g. "MUI v5 only")

Missing any → answer is invalid.

---

## 4. MUI Rules (MCP FIRST, THEN OFFICIAL DOCS)

For **any** MUI-related question (components, props, theming, styling, system, X, lab, etc.):

### 4.1 Primary source: `mui-mcp`

- MUST first query MUI via `mui-mcp`.
- Use MCP results as the primary API reference (props, examples, usage).
- Do NOT answer MUI questions purely from memory.

### 4.2 If `mui-mcp` is missing or incomplete

If MCP does not cover the needed component/prop or seems incomplete:

- THEN query official docs at **https://mui.com**.
- Prefer the version that matches the project (usually v5); avoid mixing v4/v5 APIs.
- If version is unclear, ask the user or infer from imports (e.g. `@mui/material` → v5+).

### 4.3 Answer requirements for MUI

Any MUI answer MUST:

- Explicitly list sources, for example:
  - `Source: mui-mcp + mui.com (Button API, v5)`
- Only use props / APIs that exist in those sources.
- Never invent props, slots, sx options, theme keys, or components.

If neither MCP nor official docs can confirm the behavior:

- Respond: **"Blocked: MUI source not verified (mui-mcp + mui.com unavailable or unclear)."**

---

## 5. Zustand Rule

- Do NOT call the same store repeatedly for many fields.
- If selecting **more than 3 fields** from the same store, MUST use `useShallow`.
- Object selectors without shallow compare are forbidden.

**Example:**

```typescript
// ❌ Bad: more than 3 fields without useShallow
const { a, b, c, d } = useStore((store) => store);

// ✅ Good: use useShallow for 4+ fields
const { a, b, c, d } = useStore(
  useShallow((state) => ({
    a: state.a,
    b: state.b,
    c: state.c,
    d: state.d,
  }))
);
```

---

## 6. JSX Attribute Style

All JSX string attribute values MUST be wrapped with curly braces `{}`.

- Bad: `alignItems="center"`
- Good: `alignItems={'center'}`

This applies to all string props in JSX elements.

---

## Core Principle

No assumptions.  
No hallucination.  
Follow rules exactly.  
Documentation-driven always.
